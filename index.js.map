{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  console.log('System initialized: Trexo-Elix');\n\n  // 1. Инициализация иконок\n  if (typeof lucide !== 'undefined') {\n      lucide.createIcons();\n  }\n\n  // 2. Инициализация плавного скролла (Lenis)\n  const lenis = new Lenis({\n      duration: 1.2,\n      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n      smoothWheel: true,\n  });\n  function raf(time) {\n      lenis.raf(time);\n      requestAnimationFrame(raf);\n  }\n  requestAnimationFrame(raf);\n\n  // 3. Регистрация плагина GSAP\n  gsap.registerPlugin(ScrollTrigger);\n\n  // --- ЗАПУСК МОДУЛЕЙ ---\n  initHero3D();      // 3D сфера\n  initMobileMenu();  // Мобильное меню (исправлено)\n  initAnimations();  // Анимации списков (исправлено через forEach)\n  initAccordion();   // FAQ (исправлено через forEach)\n  initContactForm(); // Форма\n  initCookies();     // Куки\n});\n\n/* --- ФУНКЦИИ --- */\n\n// 1. ИСПРАВЛЕННОЕ МОБИЛЬНОЕ МЕНЮ\nfunction initMobileMenu() {\n  const burger = document.querySelector('.header__burger');\n  const closeBtn = document.querySelector('.mobile-menu__close');\n  const menu = document.querySelector('.mobile-menu');\n  // Используем querySelectorAll, чтобы найти все ссылки внутри меню\n  const menuLinks = document.querySelectorAll('.mobile-menu__link');\n\n  function openMenu() {\n      menu.classList.add('is-open');\n      document.body.style.overflow = 'hidden'; // Блокируем скролл сайта\n  }\n\n  function closeMenu() {\n      menu.classList.remove('is-open');\n      document.body.style.overflow = ''; // Возвращаем скролл\n  }\n\n  if (burger) {\n      burger.addEventListener('click', (e) => {\n          e.preventDefault();\n          openMenu();\n      });\n  }\n\n  if (closeBtn) {\n      closeBtn.addEventListener('click', (e) => {\n          e.preventDefault();\n          closeMenu();\n      });\n  }\n\n  // Вешаем событие на КАЖДУЮ ссылку меню\n  menuLinks.forEach(link => {\n      link.addEventListener('click', () => {\n          closeMenu();\n      });\n  });\n}\n\n// 2. ИСПРАВЛЕННЫЕ АНИМАЦИИ (FOREACH LOOP)\nfunction initAnimations() {\n\n  // А) Заголовки секций (по одному)\n  const titles = document.querySelectorAll('.section__title');\n  titles.forEach(title => {\n      gsap.from(title, {\n          scrollTrigger: {\n              trigger: title,\n              start: \"top 85%\", // Начинаем, когда элемент чуть показался\n          },\n          y: 50,\n          opacity: 0,\n          duration: 0.8,\n          ease: 'power3.out'\n      });\n  });\n\n  // Б) Карточки преимуществ, Блога и Технологий\n  // Собираем ВСЕ элементы, которые должны появляться списком\n  const cards = document.querySelectorAll('.card, .blog-card, .tech-item, .step');\n\n  cards.forEach((card, index) => {\n      gsap.from(card, {\n          scrollTrigger: {\n              trigger: card,\n              start: \"top 90%\", // Срабатывает для КАЖДОЙ карточки отдельно\n          },\n          y: 30,\n          opacity: 0,\n          duration: 0.6,\n          delay: 0.1, // Небольшая задержка для плавности\n          ease: 'power2.out'\n      });\n  });\n\n  // В) Статистика в About\n  const stats = document.querySelectorAll('.stat-card');\n  stats.forEach((stat, index) => {\n      gsap.from(stat, {\n          scrollTrigger: {\n              trigger: stat,\n              start: \"top 85%\",\n          },\n          x: 50,\n          opacity: 0,\n          duration: 0.8,\n          delay: index * 0.2, // Индекс используется для очередности\n          ease: 'power3.out'\n      });\n  });\n\n  // Г) Hero анимация (оставляем timeline для синхронности)\n  const tl = gsap.timeline();\n  tl.from('.hero__badge', { y: -20, opacity: 0, duration: 0.8 })\n    .from('.hero__line', { y: 100, opacity: 0, duration: 1, stagger: 0.15, ease: 'power4.out' }, \"-=0.5\")\n    .from('.hero__desc', { opacity: 0, y: 20, duration: 0.8 }, \"-=0.5\")\n    .from('.hero__btns', { opacity: 0, y: 20, duration: 0.8 }, \"-=0.5\");\n}\n\n// 3. ИСПРАВЛЕННЫЙ АККОРДЕОН (FAQ)\nfunction initAccordion() {\n  const items = document.querySelectorAll('.accordion__btn');\n\n  items.forEach(item => {\n      item.addEventListener('click', function() {\n          // Переключаем активный класс\n          this.classList.toggle('active');\n\n          // Находим контент, идущий сразу после кнопки\n          const content = this.nextElementSibling;\n\n          if (content.style.maxHeight) {\n              // Если открыто — закрываем\n              content.style.maxHeight = null;\n          } else {\n              // Если закрыто — открываем на полную высоту\n              content.style.maxHeight = content.scrollHeight + \"px\";\n          }\n      });\n  });\n}\n\n// 4. THREE.JS (Остается без изменений, работает корректно)\nfunction initHero3D() {\n  const container = document.getElementById('hero-canvas');\n  if (!container || typeof THREE === 'undefined') return;\n\n  const scene = new THREE.Scene();\n  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  camera.position.z = 2.5;\n\n  const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  renderer.setPixelRatio(window.devicePixelRatio);\n  container.appendChild(renderer.domElement);\n\n  const particlesGeometry = new THREE.BufferGeometry();\n  const count = 1500;\n  const posArray = new Float32Array(count * 3);\n  for(let i = 0; i < count * 3; i++) {\n      posArray[i] = (Math.random() - 0.5) * 6;\n  }\n  particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));\n\n  const material = new THREE.PointsMaterial({\n      size: 0.006, color: 0xCEFF00, transparent: true, opacity: 0.7\n  });\n\n  const particlesMesh = new THREE.Points(particlesGeometry, material);\n  scene.add(particlesMesh);\n\n  let mouseX = 0, mouseY = 0;\n  const windowHalfX = window.innerWidth / 2;\n  const windowHalfY = window.innerHeight / 2;\n\n  document.addEventListener('mousemove', (e) => {\n      mouseX = (e.clientX - windowHalfX) * 0.0005;\n      mouseY = (e.clientY - windowHalfY) * 0.0005;\n  });\n\n  const clock = new THREE.Clock();\n  function animate() {\n      requestAnimationFrame(animate);\n      const elapsedTime = clock.getElapsedTime();\n      particlesMesh.rotation.y += 0.05 * (mouseX - particlesMesh.rotation.y);\n      particlesMesh.rotation.x += 0.05 * (mouseY - particlesMesh.rotation.x);\n      particlesMesh.rotation.z = elapsedTime * 0.08;\n      renderer.render(scene, camera);\n  }\n  animate();\n\n  window.addEventListener('resize', () => {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n  });\n}\n\n// 5. КОНТАКТНАЯ ФОРМА\nfunction initContactForm() {\n  const form = document.getElementById('main-form');\n  if (!form) return;\n\n  // Генерация капчи\n  const num1 = Math.floor(Math.random() * 10) + 1;\n  const num2 = Math.floor(Math.random() * 10) + 1;\n  const captchaResult = num1 + num2;\n  const taskEl = document.getElementById('captcha-task');\n  if(taskEl) taskEl.textContent = `${num1} + ${num2}`;\n\n  // Валидация телефона\n  const phoneInput = document.getElementById('phone');\n  if(phoneInput) {\n      phoneInput.addEventListener('input', (e) => {\n          e.target.value = e.target.value.replace(/\\D/g, '');\n      });\n  }\n\n  form.addEventListener('submit', (e) => {\n      e.preventDefault();\n\n      const captchaInput = document.getElementById('captcha-input');\n      const userCaptcha = parseInt(captchaInput.value);\n      const captchaError = document.getElementById('captcha-error');\n\n      if (userCaptcha !== captchaResult) {\n          captchaError.style.display = 'block';\n          return;\n      }\n      captchaError.style.display = 'none';\n\n      const btn = form.querySelector('button[type=\"submit\"]');\n      const originalText = btn.innerText;\n      btn.innerText = 'Отправка...';\n      btn.disabled = true;\n\n      setTimeout(() => {\n          form.reset();\n          btn.innerText = originalText;\n          btn.disabled = false;\n          document.getElementById('form-success').style.display = 'flex';\n          // Обновляем капчу\n          const n1 = Math.floor(Math.random() * 10) + 1;\n          const n2 = Math.floor(Math.random() * 10) + 1;\n          if(taskEl) taskEl.textContent = `${n1} + ${n2}`;\n      }, 1500);\n  });\n}\n\n// 6. COOKIES\nfunction initCookies() {\n  const popup = document.getElementById('cookie-popup');\n  const btn = document.getElementById('accept-cookies');\n\n  if (!popup || !btn) return;\n\n  if (!localStorage.getItem('cookiesAccepted')) {\n      setTimeout(() => {\n          popup.style.display = 'block';\n          gsap.fromTo(popup, { y: 100, opacity: 0 }, { y: 0, opacity: 1, duration: 0.5 });\n      }, 2000);\n  }\n\n  btn.addEventListener('click', () => {\n      localStorage.setItem('cookiesAccepted', 'true');\n      gsap.to(popup, {\n          y: 50, opacity: 0, duration: 0.3,\n          onComplete: () => popup.style.display = 'none'\n      });\n  });\n}"],"names":["lenis","t","raf","time","initHero3D","initMobileMenu","initAnimations","initAccordion","initContactForm","initCookies","burger","closeBtn","menu","menuLinks","openMenu","closeMenu","e","link","title","card","index","stat","item","content","container","scene","camera","renderer","particlesGeometry","count","posArray","i","material","particlesMesh","mouseX","mouseY","windowHalfX","windowHalfY","clock","animate","elapsedTime","form","num1","num2","captchaResult","taskEl","phoneInput","captchaInput","userCaptcha","captchaError","btn","originalText","n1","n2","popup"],"mappings":"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"}